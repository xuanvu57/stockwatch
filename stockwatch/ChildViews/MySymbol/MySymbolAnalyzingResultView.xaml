<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:strings="clr-namespace:stockwatch.Resources.Strings"
             x:Class="stockwatch.ChildViews.MySymbol.MySymbolAnalyzingResultView"
             x:Name="resultView">
    <ContentView.Resources>
        <ResourceDictionary>
            <x:Decimal x:Key="Threshold">0</x:Decimal>
            <Color x:Key="GreaterThanOrEqualThresholdColor">Green</Color>
            <Color x:Key="SmallerThanThresholdColor">Red</Color>
            <Color x:Key="DefaultThresholdColor">Black</Color>
            
            <toolkit:CompareConverter x:Key="PercentageTextColorConverter"
                ComparisonOperator="GreaterOrEqual"
                ComparingValue="{x:StaticResource Threshold}"
                TrueObject="{StaticResource GreaterThanOrEqualThresholdColor}"
                FalseObject="{StaticResource SmallerThanThresholdColor}"
                DefaultConvertReturnValue="{StaticResource DefaultThresholdColor}"/>
        </ResourceDictionary>
    </ContentView.Resources>
    
    <VerticalStackLayout
            Padding="10,0"
            Spacing="15">
        <HorizontalStackLayout>
            <Label 
        Padding="0,0,5,0"
        Text="{Binding Source={x:Static strings:AppResources.LBL_SymbolID}, StringFormat='{0}:'}"/>
            <Label                    
        FontAttributes="Bold"
        Text="{Binding LatestPrice.SymbolId, Source={x:Reference resultView}}"/>
        </HorizontalStackLayout>

        <HorizontalStackLayout>
            <Label 
                Padding="0,0,5,0"
                Text="{Binding Source={x:Static strings:AppResources.LBL_Price}, StringFormat='{0}:'}"/>
            <Label
                FontAttributes="Bold"
                Text="{Binding LatestPrice.Price, Source={x:Reference resultView}, StringFormat='{0:N0} VND', TargetNullValue='N/A'}"
                TextColor="{Binding LatestPrice.Percentage, Source={x:Reference resultView}, Converter={x:StaticResource PercentageTextColorConverter}, TargetNullValue='Black'}"/>
        </HorizontalStackLayout>

        <HorizontalStackLayout>
            <Label 
                Padding="0,0,5,0"
                Text="{Binding Source={x:Static strings:AppResources.LBL_Percentage}, StringFormat='{0}:'}"/>
            <Label
                FontAttributes="Bold"
                Text="{Binding LatestPrice.Percentage, Source={x:Reference resultView}, StringFormat='{0:F2}%', TargetNullValue='N/A'}"
                TextColor="{Binding LatestPrice.Percentage, Source={x:Reference resultView}, Converter={x:StaticResource PercentageTextColorConverter}, TargetNullValue='Black'}"/>
        </HorizontalStackLayout>

        <HorizontalStackLayout>
            <Label 
                Padding="0,0,5,0"
                Text="{Binding Source={x:Static strings:AppResources.LBL_PercentageInDay}, StringFormat='{0}:'}"/>
            <Label
                FontAttributes="Bold"
                Text="{Binding LatestPrice.PercentageInDay, Source={x:Reference resultView}, StringFormat='{0:F2}%', TargetNullValue='N/A'}"
                TextColor="{Binding LatestPrice.PercentageInDay, Source={x:Reference resultView}, Converter={x:StaticResource PercentageTextColorConverter}, TargetNullValue='Black'}"/>
        </HorizontalStackLayout>

        <HorizontalStackLayout>
            <Label 
            Padding="0,0,5,0"
            Text="{Binding Source={x:Static strings:AppResources.LBL_LatestDataAtTime}, StringFormat='{0}:'}"/>
            <Label
                Text="{Binding LatestPrice.AtTime, Source={x:Reference resultView}, StringFormat='{0:yyyy-MM-dd HH:mm:ss}', TargetNullValue='N/A'}"/>
        </HorizontalStackLayout>
    </VerticalStackLayout>
</ContentView>
